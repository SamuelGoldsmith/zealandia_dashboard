<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/history/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/history/page.tsx" />
              <option name="originalContent" value="'use client';&#10;&#10;import {TimelineColor, TimelineLayout, TimelineSize, TimelineStatus} from &quot;@/components/custom/timeline-layout&quot;;&#10;import {historicalData} from &quot;@/lib/historicalData&quot;;&#10;import {ReactNode, useState, useEffect} from &quot;react&quot;;&#10;import {ScrollArea} from &quot;@/components/ui/scroll-area&quot;&#10;import Image from &quot;next/image&quot;;&#10;import {&#10;    Carousel,&#10;    CarouselContent,&#10;    CarouselItem,&#10;    CarouselNext,&#10;    CarouselPrevious,&#10;    type CarouselApi,&#10;} from &quot;@/components/ui/carousel&quot;&#10;&#10;interface TimelineElement {&#10;    id: string;&#10;    date: string;&#10;    title: string;&#10;    description: string;&#10;    icon?: ReactNode | (() =&gt; ReactNode);&#10;    status?: TimelineStatus;&#10;    color?: TimelineColor;&#10;    size?: TimelineSize;&#10;    loading?: boolean;&#10;    error?: string;&#10;    images: string[];&#10;}&#10;&#10;export default function KMTK() {&#10;&#10;    const [api, setApi] = useState&lt;CarouselApi&gt;()&#10;&#10;    // For showing current image number&#10;    const [current, setCurrent] = useState(0)&#10;    const [count, setCount] = useState(0)&#10;&#10;    const timelineItems: TimelineElement[] = [];&#10;    let id = 0;&#10;&#10;    historicalData.timeline.forEach((item) =&gt; {&#10;        timelineItems.push({&#10;            id: String(id++),&#10;            date: String(item.date),&#10;            title: item.title,&#10;            description: item.description,&#10;            images: item.images&#10;        });&#10;    });&#10;&#10;    timelineItems.sort((a, b) =&gt; parseInt(a.date) - parseInt(b.date));&#10;    timelineItems.reverse()&#10;&#10;    timelineItems.forEach((item, index) =&gt; {&#10;        item.id = index.toString();&#10;    })&#10;&#10;    // start at the first item by default&#10;    const [selectedID, setSelectedID] = useState('0');&#10;&#10;    // derive a safe numeric index from selectedID and clamp it to available items&#10;    const selectedIndex = (() =&gt; {&#10;        const n = parseInt(selectedID, 10);&#10;        if (Number.isNaN(n)) return 0;&#10;        return Math.max(0, Math.min(timelineItems.length - 1, n));&#10;    })();&#10;    const currentImages = timelineItems[selectedIndex]?.images ?? [];&#10;&#10;    // keep `count` in sync whenever selectedID or the selected image-set changes&#10;    useEffect(() =&gt; {&#10;        setCount(currentImages.length);&#10;        // ensure current is within bounds for the new set (1-based for UI)&#10;        setCurrent((prev) =&gt; {&#10;            if (currentImages.length === 0) return 0;&#10;            return Math.max(1, Math.min(prev || 1, currentImages.length));&#10;        });&#10;    }, [selectedID, currentImages.length]);&#10;&#10;    useEffect(() =&gt; {&#10;        if (!api) {&#10;            return&#10;        }&#10;&#10;        setCount(api.scrollSnapList().length)&#10;        setCurrent(api.selectedScrollSnap() + 1)&#10;&#10;        api.on(&quot;select&quot;, () =&gt; {&#10;            setCurrent(api.selectedScrollSnap() + 1)&#10;        })&#10;&#10;        api.scrollTo(parseInt(selectedID))&#10;&#10;    }, [api, selectedID])&#10;&#10;    function ScrollToTimelineElement(): void {&#10;        const container = document.getElementById('timelineScrollArea');&#10;        if (!container) return;&#10;        const target = container.querySelector(`[data-timeline-id=&quot;${selectedID}&quot;]`) as HTMLElement | null;&#10;        if (!target) return;&#10;        target.scrollIntoView({block: 'center', behavior: 'smooth'});&#10;    }&#10;&#10;    return (&#10;        &lt;div className=&quot;flex flex-row w-full h-screen justify-between&quot;&gt;&#10;            &lt;ScrollArea className=&quot;w-[60%] h-[100vh]&quot; id={'timelineScrollArea'}&gt;&#10;                &lt;TimelineLayout&#10;                    className={'shadow-black'}&#10;                    connectorColor={'accent'}&#10;                    iconColor={'accent'}&#10;                    selectedID={selectedID}&#10;                    setSelectedID={setSelectedID}&#10;                    items={timelineItems}&#10;                /&gt;&#10;            &lt;/ScrollArea&gt;&#10;            &lt;div className={&quot;flex flex-col w-1/2&quot;}&gt;&#10;                &lt;div className=&quot;w-full h-[50vh] place-items-center&quot;&gt;&#10;                    &lt;Carousel className=&quot;w-full h-[50vh] flex flex-row&quot; setApi={setApi}&#10;                              opts={{watchDrag: false}}&#10;                    &gt;&#10;                        &lt;CarouselPrevious&#10;                            className=&quot;self-center my-2&quot;&#10;                        /&gt;&#10;                        &lt;CarouselContent className={'h-full w-[40vw] flex items-stretch'}&gt;&#10;                            {currentImages.map((img, index) =&gt; (&#10;                                &lt;CarouselItem key={index} className=&quot;h-full w-full flex items-stretch&quot;&gt;&#10;                                    &lt;div className=&quot;relative w-full h-full&quot;&gt;&#10;                                        &lt;Image&#10;                                            src={img}&#10;                                            alt={&quot;&quot;}&#10;                                            fill&#10;                                            className=&quot;object-cover&quot;&#10;                                        /&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/CarouselItem&gt;&#10;                            ))}&#10;                        &lt;/CarouselContent&gt;&#10;                        &lt;CarouselNext&#10;                            className=&quot;self-center my-2&quot;&#10;                        /&gt;&#10;                    &lt;/Carousel&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;text-muted-foreground py-2 text-center text-sm&quot;&gt;&#10;                    Slide {current} of {count}&#10;                &lt;/div&gt;&#10;                &lt;div className={&quot;w-full h-[50vh] bg-white place-items-center&quot;}&gt;&#10;                    &lt;p&gt;Map Here when GIS works&lt;/p&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;    );&#10;}&#10;" />
              <option name="updatedContent" value="'use client';&#10;&#10;import {TimelineColor, TimelineLayout, TimelineSize, TimelineStatus} from &quot;@/components/custom/timeline-layout&quot;;&#10;import {historicalData} from &quot;@/lib/historicalData&quot;;&#10;import {ReactNode, useState, useEffect} from &quot;react&quot;;&#10;import {ScrollArea} from &quot;@/components/ui/scroll-area&quot;&#10;import Image from &quot;next/image&quot;;&#10;import {&#10;    Carousel,&#10;    CarouselContent,&#10;    CarouselItem,&#10;    CarouselNext,&#10;    CarouselPrevious,&#10;    type CarouselApi,&#10;} from &quot;@/components/ui/carousel&quot;&#10;&#10;interface TimelineElement {&#10;    id: string;&#10;    date: string;&#10;    title: string;&#10;    description: string;&#10;    icon?: ReactNode | (() =&gt; ReactNode);&#10;    status?: TimelineStatus;&#10;    color?: TimelineColor;&#10;    size?: TimelineSize;&#10;    loading?: boolean;&#10;    error?: string;&#10;    images: string[];&#10;}&#10;&#10;export default function KMTK() {&#10;&#10;    const [api, setApi] = useState&lt;CarouselApi&gt;()&#10;&#10;    // For showing current image number&#10;    const [current, setCurrent] = useState(0)&#10;    const [count, setCount] = useState(0)&#10;&#10;    const timelineItems: TimelineElement[] = [];&#10;    let id = 0;&#10;&#10;    historicalData.timeline.forEach((item) =&gt; {&#10;        timelineItems.push({&#10;            id: String(id++),&#10;            date: String(item.date),&#10;            title: item.title,&#10;            description: item.description,&#10;            images: item.images&#10;        });&#10;    });&#10;&#10;    timelineItems.sort((a, b) =&gt; parseInt(a.date) - parseInt(b.date));&#10;    timelineItems.reverse()&#10;&#10;    timelineItems.forEach((item, index) =&gt; {&#10;        item.id = index.toString();&#10;    })&#10;&#10;    // start at the first item by default&#10;    const [selectedID, setSelectedID] = useState('0');&#10;&#10;    // derive a safe numeric index from selectedID and clamp it to available items&#10;    const selectedIndex = (() =&gt; {&#10;        const n = parseInt(selectedID, 10);&#10;        if (Number.isNaN(n)) return 0;&#10;        return Math.max(0, Math.min(timelineItems.length - 1, n));&#10;    })();&#10;    const currentImages = timelineItems[selectedIndex]?.images ?? [];&#10;&#10;    // keep `count` in sync whenever selectedID or the selected image-set changes&#10;    useEffect(() =&gt; {&#10;        setCount(currentImages.length);&#10;        // ensure current is within bounds for the new set (1-based for UI)&#10;        setCurrent((prev) =&gt; {&#10;            if (currentImages.length === 0) return 0;&#10;            return Math.max(1, Math.min(prev || 1, currentImages.length));&#10;        });&#10;    }, [selectedID, currentImages.length]);&#10;&#10;    useEffect(() =&gt; {&#10;        if (!api) {&#10;            return&#10;        }&#10;&#10;        setCount(api.scrollSnapList().length)&#10;        setCurrent(api.selectedScrollSnap() + 1)&#10;&#10;        api.on(&quot;select&quot;, () =&gt; {&#10;            setCurrent(api.selectedScrollSnap() + 1)&#10;        })&#10;&#10;        api.scrollTo(parseInt(selectedID))&#10;&#10;    }, [api, selectedID])&#10;&#10;    function ScrollToTimelineElement(): void {&#10;        const container = document.getElementById('timelineScrollArea');&#10;        if (!container) return;&#10;        const target = container.querySelector(`[data-timeline-id=&quot;${selectedID}&quot;]`) as HTMLElement | null;&#10;        if (!target) return;&#10;        target.scrollIntoView({block: 'center', behavior: 'smooth'});&#10;    }&#10;&#10;    return (&#10;        &lt;div className=&quot;flex flex-row w-full h-screen justify-between&quot;&gt;&#10;            &lt;ScrollArea className=&quot;w-[60%] h-[100vh]&quot; id={'timelineScrollArea'}&gt;&#10;                &lt;TimelineLayout&#10;                    className={'shadow-black'}&#10;                    connectorColor={'accent'}&#10;                    iconColor={'accent'}&#10;                    selectedID={selectedID}&#10;                    setSelectedID={setSelectedID}&#10;                    items={timelineItems}&#10;                /&gt;&#10;            &lt;/ScrollArea&gt;&#10;            &lt;div className={&quot;flex flex-col w-1/2&quot;}&gt;&#10;                &lt;div className=&quot;w-full h-[50vh] place-items-center&quot;&gt;&#10;                    &lt;Carousel className=&quot;w-full h-[50vh] flex flex-row&quot; setApi={setApi}&#10;                              opts={{watchDrag: false}}&#10;                    &gt;&#10;                        &lt;CarouselPrevious&#10;                            className=&quot;self-center my-2&quot;&#10;                        /&gt;&#10;                        &lt;CarouselContent className={'h-full w-[40vw] flex items-stretch'}&gt;&#10;                            {currentImages.map((img, index) =&gt; (&#10;                                &lt;CarouselItem key={index} className=&quot;h-full w-full flex items-stretch&quot;&gt;&#10;                                    &lt;div className=&quot;relative w-full h-full&quot;&gt;&#10;                                        &lt;Image&#10;                                            src={img}&#10;                                            alt={&quot;&quot;}&#10;                                            fill&#10;                                            className=&quot;object-cover&quot;&#10;                                        /&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/CarouselItem&gt;&#10;                            ))}&#10;                        &lt;/CarouselContent&gt;&#10;                        &lt;CarouselNext&#10;                            className=&quot;self-center my-2&quot;&#10;                        /&gt;&#10;                    &lt;/Carousel&gt;&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;text-muted-foreground py-2 text-center text-sm&quot;&gt;&#10;                    Slide {current} of {count}&#10;                &lt;/div&gt;&#10;                &lt;div className={&quot;w-full h-[50vh] bg-white place-items-center&quot;}&gt;&#10;                    &lt;p&gt;Map Here when GIS works&lt;/p&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;    );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>